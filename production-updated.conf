[options]
# Database settings
db_host = localhost
db_port = 5432
db_user = odoo
db_password = your_secure_password
db_name = production_db

# Server settings - Updated for Odoo 18
http_port = 8069
longpolling_port = 8072
workers = 4
max_cron_threads = 2

# Critical: Enable proxy mode for nginx reverse proxy
proxy_mode = True

# Security settings - Enhanced for 2024
admin_passwd = your_admin_password
list_db = False
db_filter = ^production_db$

# Modern session configuration
session_timeout = 86400
session_cookie_httponly = True
session_cookie_secure = True

# Logging - Enhanced
log_level = info
log_handler = :INFO
logfile = /var/log/odoo/odoo.log
log_rotate = True
log_db = False

# Performance - Optimized for API usage
limit_memory_hard = 2684354560
limit_memory_soft = 2147483648
limit_request = 8192
limit_time_cpu = 600
limit_time_real = 1200

# Database connection pool
db_maxconn = 64

# Worker configuration for API load
worker_class = sync
max_requests = 8192
max_requests_jitter = 1024

# API specific settings
# Enable CORS if needed (better handled in nginx)
# cors = True

# Email configuration (if using API notifications)
# email_from = noreply@your-domain.com
# smtp_server = localhost
# smtp_port = 587
# smtp_ssl = True

# Data directory
data_dir = /var/lib/odoo/filestore

# Addons path - Updated to include your base_api module
addons_path = /Users/projects/odoo_o/addons,/Users/projects/odoo_o/odoo/addons

# Additional security for production
# Disable unsafe features
unaccent = False
test_enable = False
test_file = False
dev_mode = False

# Server-wide modules (load these automatically)
server_wide_modules = base,web

# Enable debugging only if needed (disable in production)
debug_mode = False

# Additional database settings
db_template = template0
pg_path = /usr/lib/postgresql/14/bin

# File upload limits (for API file uploads)
limit_upload_file_size = 134217728

# Additional worker settings for high API load
worker_timeout = 3600
keepalive = 2

# Database connection retry
db_retry = 5

# Disable XML-RPC (use JSON-RPC and your API instead)
xmlrpc = False
xmlrpc_interface = 
xmlrpc_port = 8069

# Enable only JSON-RPC and HTTP
jsonrpc = True
http_enable = True
http_interface = 127.0.0.1

# Cache configuration for better API performance
enable_cache = True
